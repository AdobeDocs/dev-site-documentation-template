{"version":3,"sources":["webpack://dev-site-documentation-template/./node_modules/@adobe/gatsby-theme-aio/src/components/Search/index.js"],"names":["SEARCH_INPUT_WIDTH","setQueryStringParameter","name","value","params","URLSearchParams","window","location","search","set","history","replaceState","pathname","mapToIndexName","searchIndex","map","index","Object","keys","searchSuggestions","algolia","query","indexAll","queries","filter","forEach","indexName","push","hitsPerPage","Math","ceil","length","attributesToRetrieve","multipleQueries","searchIndexes","selectedIndex","keywords","Array","isArray","initIndex","filters","keyword","join","mapSearchResults","hits","results","objectID","url","_highlightResult","Search","searchKeywords","showSearch","setShowSearch","searchButtonId","useState","searchQuery","setSearchQuery","setSelectedIndex","selectedKeywords","setSelectedKeyWords","showSearchResults","setShowSearchResults","isFocused","setIsFocused","showClear","setShowClear","searchRef","useRef","inputRef","searchResultsRef","searchSuggestionResults","setSearchSuggestionResults","searchResults","setSearchResults","isSuggestionsOpen","setIsSuggestionsOpen","triggerSearch","setTriggerSearch","selectedTabIndicator","isAnimated","setIsAnimated","positionSelectedTabIndicator","selectedTab","indexOf","tabRef","current","animateIndicator","positionIndicator","SEARCH_PARAMS","useEffect","searchParams","URL","get","split","focus","scrollTop","onClick","target","contains","id","document","addEventListener","removeEventListener","onEscape","key","ref","css","MOBILE_SCREEN_WIDTH","className","onSubmit","event","preventDefault","classNames","Magnify","onFocus","onBlur","onChange","e","suggestions","title","description","type","placeholder","autoComplete","Cross","isOpen","searchSuggestion","i","isHighlighted","href","DESKTOP_SCREEN_WIDTH","SIDENAV_WIDTH","isSelected","includes","checked","selectedKeyword","onFontsReady","indexLabel","element","selected","tabIndex","searchResult","to","dangerouslySetInnerHTML","__html","origin","xmlns","viewBox","d"],"mappings":"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","file":"379b34f3-4687fb3f5a72001fe0ad.js","sourcesContent":["/**\n *  Copyright 2020 Adobe. All rights reserved.\n *  This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License. You may obtain a copy\n *  of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software distributed under\n *  the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n *  OF ANY KIND, either express or implied. See the License for the specific language\n *  governing permissions and limitations under the License.\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { css } from '@emotion/react';\nimport { AnchorLink } from '../AnchorLink';\nimport {\n  Tabs,\n  Item as TabsItem,\n  Label as TabsItemLabel,\n  TabsIndicator,\n  positionIndicator,\n  animateIndicator\n} from '../Tabs';\nimport { Item as MenuItem, Menu } from '../Menu';\nimport { Popover } from '../Popover';\nimport PropTypes from 'prop-types';\nimport { MOBILE_SCREEN_WIDTH, DESKTOP_SCREEN_WIDTH, SIDENAV_WIDTH, SEARCH_PARAMS } from '../../utils';\nimport classNames from 'classnames';\nimport '@spectrum-css/typography';\nimport '@spectrum-css/textfield';\nimport '@spectrum-css/search';\nimport '@spectrum-css/button';\nimport { Cross, Magnify } from '../Icons';\nimport { Checkbox } from '../Checkbox';\n\nconst SEARCH_INPUT_WIDTH = '688px';\nconst SEARCH_INDEX_ALL = 'all';\nconst SUGGESTION_MAX_RESULTS = 10;\nconst SEARCH_MAX_RESULTS = 100;\n\n// Used to update the url in the browser\nconst setQueryStringParameter = (name, value) => {\n  const params = new URLSearchParams(window.location.search);\n  params.set(name, value);\n  window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\n};\n\nconst mapToIndexName = (searchIndex) => searchIndex.map((index) => Object.keys(index)[0]);\n\nconst searchSuggestions = async (algolia, query, searchIndex, indexAll) => {\n  const queries = [];\n  // By default use all indexes\n  if (Object.keys(searchIndex[0])[0] === SEARCH_INDEX_ALL) {\n    searchIndex = indexAll;\n  }\n  // Or use specific indexes without \"all\" index\n  else {\n    searchIndex = mapToIndexName(searchIndex).filter((index) => index !== SEARCH_INDEX_ALL);\n  }\n\n  searchIndex.forEach((indexName) => {\n    queries.push({\n      indexName,\n      query,\n      params: {\n        hitsPerPage: Math.ceil(SUGGESTION_MAX_RESULTS / searchIndex.length),\n        attributesToRetrieve: ['objectID', 'url', 'title', 'description']\n      }\n    });\n  });\n\n  return await algolia.multipleQueries(queries);\n};\n\nconst searchIndexes = async (algolia, query, selectedIndex, indexAll, keywords) => {\n  if (selectedIndex === 'all') {\n    selectedIndex = indexAll;\n  }\n\n  // Single index search\n  if (!Array.isArray(selectedIndex)) {\n    const index = algolia.initIndex(selectedIndex);\n\n    return await index.search(query, {\n      attributesToRetrieve: ['objectID', 'url'],\n      hitsPerPage: SEARCH_MAX_RESULTS,\n      filters: keywords.map((keyword) => `keywords:\"${keyword}\"`).join(' AND ')\n    });\n  }\n  // Multi index search\n  else {\n    const queries = [];\n    selectedIndex.forEach((indexName) => {\n      queries.push({\n        indexName,\n        query,\n        params: {\n          attributesToRetrieve: ['objectID', 'url'],\n          hitsPerPage: Math.ceil(SEARCH_MAX_RESULTS / selectedIndex.length),\n          filters: keywords.map((keyword) => `keywords:\"${keyword}\"`).join(' AND ')\n        }\n      });\n    });\n\n    return await algolia.multipleQueries(queries);\n  }\n};\n\nconst mapSearchResults = (hits, results) => {\n  hits.forEach(({ objectID, url, _highlightResult }) => {\n    results.push({\n      objectID,\n      url,\n      _highlightResult\n    });\n  });\n};\n\nconst Search = ({ algolia, searchIndex, searchKeywords, indexAll, showSearch, setShowSearch, searchButtonId }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(mapToIndexName(searchIndex)[0]);\n  const [selectedKeywords, setSelectedKeyWords] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [isFocused, setIsFocused] = useState(false);\n  const [showClear, setShowClear] = useState(false);\n  const searchRef = useRef(null);\n  const inputRef = useRef(null);\n  const searchResultsRef = useRef(null);\n  const [searchSuggestionResults, setSearchSuggestionResults] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSuggestionsOpen, setIsSuggestionsOpen] = useState(false);\n  const [triggerSearch, setTriggerSearch] = useState(false);\n  const selectedTabIndicator = useRef(null);\n  // Don't animate the tab indicator by default\n  const [isAnimated, setIsAnimated] = useState(false);\n\n  const getSelectedTabIndex = () => searchIndex[mapToIndexName(searchIndex).indexOf(selectedIndex)].tabRef;\n\n  const positionSelectedTabIndicator = (selectedTab = getSelectedTabIndex()) => {\n    if (showSearchResults && selectedTab?.current) {\n      animateIndicator(selectedTabIndicator, isAnimated);\n      positionIndicator(selectedTabIndicator, selectedTab);\n    }\n  };\n\n  const search = async () => {\n    if (searchQuery.length) {\n      setIsSuggestionsOpen(false);\n      setQueryStringParameter(SEARCH_PARAMS.query, searchQuery);\n      setQueryStringParameter(SEARCH_PARAMS.keywords, selectedKeywords);\n      setQueryStringParameter(SEARCH_PARAMS.index, selectedIndex);\n\n      positionSelectedTabIndicator();\n      setShowSearchResults(true);\n\n      const search = await searchIndexes(algolia, searchQuery, selectedIndex, indexAll, selectedKeywords);\n      const results = [];\n\n      if (search?.results?.length) {\n        search.results.forEach(({ hits }) => {\n          mapSearchResults(hits, results);\n        });\n      } else if (search?.hits?.length) {\n        mapSearchResults(search.hits, results);\n      }\n\n      setSearchResults(results);\n    }\n  };\n\n  useEffect(() => {\n    if (showSearch) {\n      // Read search params\n      const searchParams = new URL(window.location).searchParams;\n      const query = searchParams.get(SEARCH_PARAMS.query);\n      const keywords = searchParams.get(SEARCH_PARAMS.keywords);\n      const index = searchParams.get(SEARCH_PARAMS.index);\n\n      if (index) {\n        setSelectedIndex(index);\n      }\n\n      if (keywords) {\n        setSelectedKeyWords(keywords.split(','));\n      }\n\n      if (query?.length) {\n        setSearchQuery(query);\n        setShowClear(true);\n\n        setTriggerSearch(true);\n      }\n\n      // Autofocus\n      if (inputRef?.current) {\n        inputRef.current.focus();\n      }\n    }\n  }, [showSearch]);\n\n  useEffect(() => {\n    search();\n  }, [selectedIndex, selectedKeywords]);\n\n  useEffect(() => {\n    if (triggerSearch) {\n      setTriggerSearch(false);\n      search();\n    }\n  }, [triggerSearch, setTriggerSearch]);\n\n  useEffect(() => {\n    if (searchResultsRef?.current) {\n      searchResultsRef.current.scrollTop = 0;\n    }\n  }, [searchResults]);\n\n  useEffect(() => {\n    if (showSearchResults) {\n      positionSelectedTabIndicator();\n\n      setIsAnimated(true);\n    } else {\n      setIsAnimated(false);\n    }\n  }, [showSearchResults]);\n\n  useEffect(() => {\n    const onClick = ({ target }) => {\n      setIsSuggestionsOpen(false);\n\n      if (\n        !showSearchResults &&\n        searchRef.current &&\n        !searchRef.current.contains(target) &&\n        target.id !== searchButtonId\n      ) {\n        setShowSearch(false);\n      }\n    };\n\n    document.addEventListener('click', onClick, true);\n    return () => {\n      document.removeEventListener('click', onClick, true);\n    };\n  }, [setIsSuggestionsOpen, showSearchResults, setShowSearch, searchRef]);\n\n  useEffect(() => {\n    const onEscape = ({ key }) => {\n      if (key === 'Escape') {\n        setShowSearch(false);\n      }\n    };\n\n    document.addEventListener('keydown', onEscape);\n    return () => {\n      document.removeEventListener('keydown', onEscape);\n    };\n  }, [setShowSearch]);\n\n  return (\n    <>\n      <div\n        ref={searchRef}\n        css={css`\n          position: fixed;\n          top: var(--spectrum-global-dimension-size-800);\n          left: 0;\n          right: 0;\n          ${showSearchResults && 'bottom: 0;'}\n          background-color: var(--spectrum-global-color-static-white);\n          z-index: 10;\n\n          @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n            top: var(--spectrum-global-dimension-size-1200);\n          }\n        `}>\n        <div\n          css={css`\n            position: relative;\n            margin: var(--spectrum-global-dimension-size-400) auto;\n            max-width: ${SEARCH_INPUT_WIDTH};\n\n            @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n              max-width: calc(100vw - var(--spectrum-global-dimension-size-800));\n            }\n          `}>\n          <form\n            css={css`\n              width: 100%;\n            `}\n            className=\"spectrum-Search\"\n            onSubmit={async (event) => {\n              event.preventDefault();\n\n              await search();\n            }}>\n            <div\n              className={classNames('spectrum-Textfield', { 'is-focused': isFocused })}\n              css={css`\n                min-width: auto;\n                width: 100%;\n              `}>\n              <Magnify className=\"spectrum-Textfield-icon\" />\n              <input\n                ref={inputRef}\n                value={searchQuery}\n                onFocus={() => {\n                  setIsFocused(true);\n                }}\n                onBlur={() => {\n                  setIsFocused(false);\n                }}\n                onChange={async (e) => {\n                  const query = e.target.value;\n                  setSearchQuery(query);\n\n                  if (query.length) {\n                    setShowClear(true);\n\n                    const suggestions = await searchSuggestions(algolia, query, searchIndex, indexAll);\n\n                    if (suggestions?.results?.length) {\n                      const results = [];\n                      suggestions.results.forEach(({ hits }) => {\n                        hits.forEach(({ objectID, url, title, description }) => {\n                          results.push({\n                            objectID,\n                            url,\n                            title,\n                            description\n                          });\n                        });\n                      });\n                      setSearchSuggestionResults(results);\n                    } else {\n                      setSearchSuggestionResults([]);\n                    }\n\n                    setIsSuggestionsOpen(true);\n                  } else {\n                    setShowClear(false);\n                    setIsSuggestionsOpen(false);\n                  }\n                }}\n                aria-label=\"Search\"\n                type=\"search\"\n                placeholder=\"Search\"\n                className=\"spectrum-Textfield-input spectrum-Search-input\"\n                autoComplete=\"off\"\n              />\n            </div>\n            {showClear && (\n              <button\n                css={css`\n                  position: absolute;\n                `}\n                aria-label=\"Clear Search\"\n                type=\"reset\"\n                className=\"spectrum-ClearButton spectrum-Search-clearButton\"\n                onClick={() => {\n                  setSearchQuery('');\n                  inputRef.current.focus();\n                }}>\n                <Cross />\n              </button>\n            )}\n          </form>\n\n          <Popover\n            isOpen={isSuggestionsOpen}\n            css={css`\n              position: absolute;\n              top: var(--spectrum-global-dimension-size-400);\n              width: ${SEARCH_INPUT_WIDTH};\n\n              @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n                max-width: calc(100vw - var(--spectrum-global-dimension-size-800));\n              }\n            `}>\n            {searchSuggestionResults.length > 0 ? (\n              <Menu>\n                {searchSuggestionResults.map((searchSuggestion, i) => (\n                  <MenuItem isHighlighted={i === 0} key={searchSuggestion.objectID} href={searchSuggestion.url}>\n                    <div\n                      css={css`\n                        white-space: nowrap;\n                        text-overflow: ellipsis;\n                        overflow: hidden;\n                      `}>\n                      <strong>{searchSuggestion.title}</strong> - {searchSuggestion.description}\n                    </div>\n                  </MenuItem>\n                ))}\n              </Menu>\n            ) : (\n              <div\n                css={css`\n                  margin-top: var(--spectrum-global-dimension-size-800);\n                  margin-bottom: var(--spectrum-global-dimension-size-800);\n                `}>\n                <div\n                  css={css`\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                  `}>\n                  <h4\n                    className=\"spectrum-Heading spectrum-Heading--sizeS\"\n                    css={css`\n                      margin-bottom: var(--spectrum-global-dimension-size-100);\n                    `}>\n                    No Results Found\n                  </h4>\n                  <em>Try another search term</em>\n                </div>\n              </div>\n            )}\n          </Popover>\n        </div>\n\n        {showSearchResults && (\n          <div\n            css={css`\n              display: flex;\n              max-width: ${DESKTOP_SCREEN_WIDTH};\n              margin: auto;\n              height: 100%;\n\n              @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n                overflow: auto;\n                flex-wrap: wrap;\n              }\n            `}>\n            <div\n              css={css`\n                display: flex;\n                align-items: flex-start;\n                flex-direction: column;\n                box-sizing: border-box;\n                padding: var(--spectrum-global-dimension-size-200);\n                min-width: ${SIDENAV_WIDTH};\n              `}>\n              <h4\n                className=\"spectrum-Heading spectrum-Heading--sizeXS\"\n                css={css`\n                  margin-bottom: var(--spectrum-global-dimension-size-100);\n                `}>\n                Filter by\n              </h4>\n\n              <div\n                css={css`\n                  margin-top: var(--spectrum-global-dimension-size-100);\n                  display: flex;\n                  flex-direction: column;\n                `}>\n                {searchKeywords.map((keyword, i) => (\n                  <Checkbox\n                    key={i}\n                    isSelected={selectedKeywords.includes(keyword)}\n                    value={keyword}\n                    onChange={(checked) => {\n                      if (checked) {\n                        setSelectedKeyWords((selectedKeywords) => [...selectedKeywords, keyword]);\n                      } else {\n                        setSelectedKeyWords(selectedKeywords.filter((selectedKeyword) => selectedKeyword !== keyword));\n                      }\n                    }}>\n                    {keyword}\n                  </Checkbox>\n                ))}\n              </div>\n            </div>\n\n            <div\n              css={css`\n                height: 100%;\n              `}>\n              <Tabs\n                onFontsReady={() => {\n                  positionSelectedTabIndicator();\n                }}>\n                {searchIndex.map((index, i) => {\n                  const indexName = Object.keys(index)[0];\n                  const indexLabel = index[indexName];\n\n                  const setTabRef = (element) => {\n                    index.tabRef = { current: element };\n                  };\n\n                  return (\n                    <TabsItem\n                      key={i}\n                      ref={setTabRef}\n                      selected={selectedIndex === indexName}\n                      tabIndex={0}\n                      onClick={async () => {\n                        setSelectedIndex(indexName);\n                      }}>\n                      <TabsItemLabel>{indexLabel}</TabsItemLabel>\n                    </TabsItem>\n                  );\n                })}\n\n                <TabsIndicator ref={selectedTabIndicator} />\n              </Tabs>\n\n              {searchResults.length > 0 ? (\n                <div\n                  ref={searchResultsRef}\n                  css={css`\n                    height: calc(\n                      100% - var(--spectrum-global-dimension-size-800) - var(--spectrum-global-dimension-size-800) -\n                        var(--spectrum-global-dimension-size-200)\n                    );\n                    overflow: auto;\n\n                    @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n                      height: auto;\n                      overflow: inherit;\n                    }\n                  `}>\n                  {searchResults.map((searchResult) => (\n                    <div\n                      css={css`\n                        margin: var(--spectrum-global-dimension-size-300);\n\n                        mark,\n                        em {\n                          background-color: transparent;\n                          color: inherit;\n                          font-weight: 700;\n                          font-style: inherit;\n                        }\n                      `}>\n                      <div\n                        className=\"spectrum-Body spectrum-Body--sizeM\"\n                        css={css`\n                          margin-bottom: var(--spectrum-global-dimension-size-100);\n                        `}>\n                        <AnchorLink to={searchResult.url}>\n                          <span dangerouslySetInnerHTML={{ __html: searchResult._highlightResult.title.value }} />\n                        </AnchorLink>\n                      </div>\n                      <AnchorLink to={searchResult.url}>{`${location.origin}${searchResult.url}`}</AnchorLink>\n                      <div\n                        className=\"spectrum-Body spectrum-Body--sizeS\"\n                        css={css`\n                          margin: var(--spectrum-global-dimension-size-50) 0;\n                        `}\n                        dangerouslySetInnerHTML={{ __html: searchResult._highlightResult.description.value }}\n                      />\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div\n                  css={css`\n                    position: absolute;\n                    top: var(--spectrum-global-dimension-size-3600);\n                    height: calc(2 * var(--spectrum-global-dimension-size-1250));\n                    margin-top: calc(-1 * var(--spectrum-global-dimension-size-1250));\n                    text-align: center;\n                    right: 0;\n                    left: 0;\n                    padding: 0 var(--spectrum-global-dimension-size-200);\n\n                    @media screen and (max-width: ${MOBILE_SCREEN_WIDTH}) {\n                      position: static;\n                      margin: var(--spectrum-global-dimension-size-800) 0;\n                      height: auto;\n                    }\n                  `}>\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 104 90\"\n                    css={css`\n                      width: var(--spectrum-global-dimension-size-2400);\n                      height: var(--spectrum-global-dimension-size-1200);\n                      margin-bottom: var(--spectrum-global-dimension-size-300);\n                      fill: var(--spectrum-global-color-static-gray-500);\n                    `}>\n                    <g>\n                      <g>\n                        <path d=\"M37.5,69A24.54,24.54,0,1,0,17,57.92l0,0L1.46,73.52A5,5,0,0,0,5,82.05H5a5,5,0,0,0,3.54-1.47L24.06,65l0,0A24.33,24.33,0,0,0,37.5,69Zm0-46A21.5,21.5,0,1,1,16,44.5,21.52,21.52,0,0,1,37.5,23ZM6.41,78.46A2,2,0,0,1,5,79.05H5a2,2,0,0,1-1.42-3.42L18.83,60.34a25.21,25.21,0,0,0,2.83,2.83Z\"></path>\n                        <path d=\"M28.67,53.33a1.51,1.51,0,0,0,1.06.44,1.49,1.49,0,0,0,1.06-.44l6.71-6.71,6.71,6.71a1.5,1.5,0,0,0,2.12,0,1.49,1.49,0,0,0,0-2.12L39.62,44.5l6.71-6.71a1.49,1.49,0,0,0,0-2.12,1.51,1.51,0,0,0-2.12,0L37.5,42.38l-6.71-6.71a1.5,1.5,0,0,0-2.12,2.12l6.71,6.71-6.71,6.71A1.51,1.51,0,0,0,28.67,53.33Z\"></path>\n                        <path d=\"M102.5,31a1.5,1.5,0,0,0-1.5,1.5V86.17a.83.83,0,0,1-.83.83H38.83a.83.83,0,0,1-.83-.83V73.5a1.5,1.5,0,0,0-3,0V86.17A3.84,3.84,0,0,0,38.83,90h61.34A3.84,3.84,0,0,0,104,86.17V32.5A1.5,1.5,0,0,0,102.5,31Z\"></path>\n                        <path d=\"M37.5,17A1.5,1.5,0,0,0,39,15.5V3.83A.83.83,0,0,1,39.83,3H75V26.5A1.5,1.5,0,0,0,76.5,28h25.55a1.5,1.5,0,0,0,1-2.57L77.55.43a1.43,1.43,0,0,0-.49-.32A1.41,1.41,0,0,0,76.52,0H39.83A3.84,3.84,0,0,0,36,3.83V15.5A1.5,1.5,0,0,0,37.5,17ZM78,5.07,98.37,25H78Z\"></path>\n                      </g>\n                    </g>\n                  </svg>\n                  <h3 className=\"spectrum-Heading spectrum-Heading--light spectrum-Heading--sizeM\">\n                    Sorry, we couldn't find any results for <strong>{searchQuery}</strong>\n                  </h3>\n                  <p\n                    className=\"spectrum-Body spectrum-Body--S\"\n                    css={css`\n                      margin-top: var(--spectrum-global-dimension-size-100);\n                    `}>\n                    Make sure all the words are spelled correctly or try to refine your keywords.\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {!showSearchResults && (\n        <div\n          css={css`\n            position: fixed;\n            z-index: 1;\n            top: calc(var(--spectrum-global-dimension-size-1200) + var(--spectrum-global-dimension-size-800));\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-color: rgba(0, 0, 0, 0.4);\n            pointer-events: none;\n          `}\n        />\n      )}\n    </>\n  );\n};\n\nSearch.propTypes = {\n  algolia: PropTypes.object,\n  searchIndex: PropTypes.array,\n  indexAll: PropTypes.array,\n  showSearch: PropTypes.bool,\n  setShowSearch: PropTypes.func,\n  searchButtonId: PropTypes.string\n};\n\nexport { Search };\n"],"sourceRoot":""}